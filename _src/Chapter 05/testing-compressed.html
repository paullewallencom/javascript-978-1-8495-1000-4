<html><head><title>Getting the right values</title><style>input{padding:5px;margin:5px;font-size:12px;height:2.2em;}.block{height:40px;}.shown{display:none;}.response{padding:5px;margin:5px;width:inherit;color:red;font-size:16px;float:left;}#container{position:absolute;width:850px;padding:5px;border:solid 2px black;height:430px;}#left{height:inherit;width:420px;border-right:solid 2px black;float:left;padding:5px;}#right{height:inherit;width:330px;float:left;padding:5px;}#bottom{float:left;bottom:5px;padding:5px;}#finalResponse{float:left;width:830px;height:300px;border:solid blue 3px;padding:5px;}#debugging{position:relative;float:right;height:95%;width:350px;border:solid 3px red;padding:5px;color:red;font-size:10px;}</style><script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js"></script><script type="text/javascript">"use strict";var globalCounter=0;function checkTruthCharacters(elementObj){var trueOrFalse=/^[a-zA-Z\s]*$/.test(elementObj.value);return trueOrFalse;}
function checkTruthDigits(elementObj){var trueOrFalse=/^\d+$/.test(elementObj.value);return trueOrFalse;}
function alertMessage(messageObject){alert(messageObject);return true;}
function nameOfFunction(functionObj){var functionName=/\W*function\s+([\w\$]+)\(/.exec(functionObj);return functionName;}
function totalInputElements(){return document.testFormResponse.length;}
function nameOfPerson(){return document.testFormResponse.nameOfPerson.value;}
function birth(){return document.testFormResponse.birth.value;}
function age(){return document.testFormResponse.age.value;}
function spending(){return document.testFormResponse.spending.value;}
function salary(){return document.testFormResponse.salary.value;}
function retire(){return document.testFormResponse.retire.value;}
function retirementMoney(){return document.testFormResponse.retirementMoney.value;}
function salaryPerYear(){return salary()*12;}
function spendingPerYear(){return spending()*12;}
function ageDifference(){return retire()-age();}
function incomeDifference(){return salaryPerYear()-spendingPerYear();}
function confirmedSavingsByRetirement(){return incomeDifference()*ageDifference();}
function shortChange(){return retirementMoney()-confirmedSavingsByRetirement();}
function yearsNeeded(){return shortChange()/12;}
function excessMoney(){return confirmedSavingsByRetirement()-retirementMoney();}
function debuggingMessages(functionName,objectCalled,message){var elementName;if(objectCalled.name){elementName=objectCalled.name;}
else if(objectCalled.id){elementName=objectCalled.id;}
else{elementName=message;}
document.getElementById("debugging").innerHTML+="Function name :"+functionName+"<br>element :"+elementName+"<br>";}
function buildFinalResponse(name,retiring,yearsNeeded,retire,shortChange){debuggingMessages(nameOfFunction(buildFinalResponse),-1,"no messages");var element=document.getElementById("finalResponse");if(retiring===false){element.innerHTML+="<p>Hi <b>"+name+"<\/b>,<\/p>";element.innerHTML+="<p>We've processed your information and we have noticed a problem.<\/p>";element.innerHTML+="<p>Base on your current spending habits, you will not be able to retire by <b>"+retire+" <\/b> years old.<\/p>";element.innerHTML+="<p>You need to make another <b>"+shortChange+"<\/b> dollars before you retire inorder to acheive our goal<\/p>";element.innerHTML+="<p>You either have to increase your income or decrease your spending.<\/p>";}
else{element.innerHTML+="<p>Hi <b>"+name+"<\/b>,<\/p>";element.innerHTML+="<p>We've processed your information and are pleased to announce that you will be able to retire on time.<\/p>";element.innerHTML+="<p>Base on your current spending habits, you will be able to retire by <b>"+retire+"<\/b>years old.<\/p>";element.innerHTML+="<p>Also, you'll have' <b>"+shortChange+"<\/b> amount of excess cash when you retire.<\/p>";element.innerHTML+="<p>Congrats!<\/p>";}}
function checkForm(formObj){alertMessage("checkForm Final");if(incomeDifference()<=0){buildFinalResponse(nameOfPerson,-1,-1,-1,incomeDifference);return true;}
else{if(confirmedSavingsByRetirement()<=retirementMoney()){buildFinalResponse(nameOfPerson(),false,yearsNeeded(),retire(),shortChange());return true;}
else{buildFinalResponse(nameOfPerson(),true,-1,retire(),excessMoney());return true;}}}
function addResponseElement(messageValue,idName){globalCounter=globalCounter+1;debuggingMessages(nameOfFunction(addResponseElement),"empty","object is a value");document.getElementById('formSubmit').innerHTML+="<input type=\"text\" value=\""+messageValue+"\"name = \""+idName+"\" /><br>";if(globalCounter===7){document.getElementById('formSubmit').innerHTML+="<input type=\"submit\" value=\"Submit\" />";}}
function submitValues(elementObj){debuggingMessages(nameOfFunction(submitValues),elementObj,"empty");var characters=/^[a-zA-Z\s]*$/.test(elementObj.value);var digits=/^\d+$/.test(elementObj.value);if(elementObj.name==='enterNumber'){if(elementObj.value<0){alertMessage("Input must be positive!");return false;}}
if(elementObj.id==='retire'){if(elementObj.value<document.getElementById('age').value){alertMessage('retirement age must be larger than age');return false;}}
if(elementObj.name==='enterText'){if(elementObj.value.length<=3){alertMessage("Input must be more than 3 characters!");document.getElementById(elementObj.id).click();return true;}
if(elementObj.value.length>=100){alertMessage("Input must be less than 100 characters!");document.getElementById(elementObj.id).click();return true;}}
if(elementObj.name==='enterNumber'){if(elementObj.value.length>=10){alertMessage("Input must be less than 10 digits!");document.getElementById(elementObj.id).click();return true;}}
if(elementObj.value===""){alertMessage("input is empty");return false;}
else if(elementObj.name==="enterNumber"&&digits===false){alertMessage("the input must be a digit!");debuggingMessages(nameOfFunction(submitValues),elementObj,"wrong input");return false;}
else if(elementObj.name==="enterText"&&characters===false){alertMessage("the input must be characters only!");return false;}
else{elementObj.disabled=true;addResponseElement(elementObj.value,elementObj.id);return true;}}
function checkSecondForm(elementObj){alertMessage("checkSecondForm");debuggingMessages(nameOfFunction(submitValues),elementObj,"empty");if(elementObj.id==='retire'){if(elementObj.value<document.getElementById('age').value){alertMessage('retirement age must be larger than age');return false;}}
if(elementObj.name==='enterNumber'){if(elementObj.value<0){alertMessage("Input must be positive!");return false;}}
if(elementObj.name==='enterText'){if(elementObj.value.length<=3){alertMessage("Input must be more than 3 characters!");document.getElementById(elementObj.id).click();return true;}
if(elementObj.value.length>=100){alertMessage("Input must be less than 100 characters!");document.getElementById(elementObj.id).click();return true;}}
if(elementObj.name==='enterNumber'){if(elementObj.value.length>=10){alertMessage("Input must be less than 10 digits!");document.getElementById(elementObj.id).click();return true;}}
if(document.testFormResponse.nameOfPerson.value===""){alertMessage("fields must be filled!");return false;}
if(document.testFormResponse.birth.value===""){alertMessage("fields must be filled!");return false;}
if(document.testFormResponse.age.value===""){alertMessage("fields must be filled!");return false;}
if(document.testFormResponse.spending.value===""){alertMessage("fields must be filled!");return false;}
if(document.testFormResponse.salary.value===""){alertMessage("fields must be filled!");return false;}
if(document.testFormResponse.retire.value===""){alertMessage("fields must be filled!");return false;}
if(document.testFormResponse.retirementMoney.value===""){alertMessage("fields must be filled!");return false;}
var charactersForName=/^[a-zA-Z\s]*$/.test(document.testFormResponse.nameOfPerson.value);var charactersForPlaceOfBirth=/^[a-zA-Z\s]*$/.test(document.testFormResponse.birth.value);var digitsForAge=/^\d+$/.test(document.testFormResponse.age.value);var digitsForSpending=/^\d+$/.test(document.testFormResponse.spending.value);var digitsForSalary=/^\d+$/.test(document.testFormResponse.salary.value);var digitsForRetire=/^\d+$/.test(document.testFormResponse.retire.value);var digitsForRetirementMoney=/^\d+$/.test(document.testFormResponse.retirementMoney.value);if(charactersForName===false||charactersForPlaceOfBirth===false){alertMessage("the input must be characters only!");debuggingMessages(nameOfFunction(submitValues),elementObj,"wrong input");return false;}
else if(digitsForAge===false||digitsForSpending===false||digitsForSalary===false||digitsForRetire===false||digitsForRetirementMoney===false){alertMessage("the input must be digits only!");debuggingMessages(nameOfFunction(submitValues),elementObj,"wrong input");return false;}
else{checkForm(elementObj);alert("all is fine");return false;}}
jQuery(document).ready(function(){jQuery('#nameOfPerson').blur(function(){submitValues(this);});jQuery('#birth').blur(function(){submitValues(this);});jQuery('#age').blur(function(){submitValues(this);});jQuery('#spending').blur(function(){submitValues(this);});jQuery('#salary').blur(function(){submitValues(this);});jQuery('#retire').blur(function(){submitValues(this);});jQuery('#retirementMoney').blur(function(){submitValues(this);});jQuery('#formSubmit').submit(function(){checkSecondForm(this);return false;});});</script></head><body><div id="container"><div id="left"><h3>Enter your information here</h3><form name="testForm"><div class="block"><input type="text"name="enterText"id="nameOfPerson"size="50"value="Enter your name"/><br></div><div class="block"><input type="text"name="enterText"id="birth"size="50"value="Enter your place of birth"/><br></div><div class="block"><input type="text"name="enterNumber"id="age"size="50"maxlength="2"value="Enter your age"/><br></div><div class="block"><input type="text"name="enterNumber"id="spending"size="50"value="Enter your spending per month"/><br></div><div class="block"><input type="text"name="enterNumber"id="salary"size="50"value="Enter your salary per month"/><br></div><div class="block"><input type="text"name="enterNumber"id="retire"size="50"maxlength="3"value="Enter your the age you wish to retire at"/><br></div><div class="block"><input type="text"name="enterNumber"id="retirementMoney"size="50"value="Enter the amount of money you wish to have for retirement"/><br></div></form></div><div id="right"><h3>Response</h3><form name="testFormResponse"id="formSubmit"><!--<input type="text"name="enterText"id="nameOfPerson"size="50"value="Enter your name"/><br><input type="text"name="enterText"id="birth"size="50"value="Enter your place of birth"/><br><input type="text"name="enterNumber"id="age"size="50"maxlength="2"value="Enter your age"/><br><input type="text"name="enterNumber"id="spending"size="50"value="Enter your spending per month"/><br><input type="text"name="enterNumber"id="salary"size="50"value="Enter your salary per month"/><br><input type="text"name="enterNumber"id="retire"size="50"maxlength="3"value="Enter your the age you wish to retire at"/><br><input type="text"name="enterNumber"id="retirementMoney"size="50"value="Enter the amount of money you wish to have for retirement"/><br>--></form></div><div id="finalResponse"><h3>Final response:</h3></div></div><div id="debugging"><h3>Debugging messages:</h3></div></body></html>